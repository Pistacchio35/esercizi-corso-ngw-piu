<!-- In questo sito web vengono ricercati dei piatti tramite input dell'utente
 e mostrati sottoforma di elenco, il tutto dopo essere loggato

ATTUALMENTE NON VIENE MOSTRATO IL PIATTO TROVATO SULLA PAGINA MA SULLA CONSOLE

 -->
<html>
    <head>
        <title>Ricerca Piatto</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>

        <main>
            <center>

                <h1> Benvenuto <span id="nome-utente" class="nome_utente">X</span></h1>

                <input type="text" id="piatto">

                <input type="button" id="ricerca" value="CERCA"
                    onclick="ricerca_piatto()" class="button">

                <br><br><br>

                <input type="button" value="TORNA" onclick="torna()" class="button">

                <div id="mostra-piatti">
                    <ul class="elenco-piatti"></ul>
                    <iframe width="420" height="315" src="" id="video"></iframe>
                </div>

            </center>
        </main>
        <footer>
        </footer>

        <script src="utility.js"></script>
        <script>
            
            async function ricerca_piatto(){
                
                let piatto = document.getElementById('piatto').value
                
                let risposta = await fetch("https://www.themealdb.com/api/json/v1/1/search.php?s="+piatto);
                let rispost_json = await risposta.json();
                console.log(rispost_json);
            
                let meal = rispost_json.meals[0];
                console.log(meal.strMeal);
                let yt = rispost_json.meals[0];
                console.log(yt.strYoutube);
                let descr = rispost_json.meals[0];
                console.log(descr.strInstructions);
                
                mostra(meal,yt,descr)
            }



            if(localStorage.getItem("utente") == "")
                        {
                window.location.href = "index9.html";
            
            }
                
            let utente = JSON.parse(localStorage.getItem("utente"))

            document.getElementById("nome-utente").innerHTML = utente.username
            
            function torna(){
                window.location.href = "index.html";
            }

        </script>

    </body>
</html>